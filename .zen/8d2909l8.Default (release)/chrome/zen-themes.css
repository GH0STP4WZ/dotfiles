/* Zen Mods - Generated by ZenMods.
* FILE GENERATED AT: Wednesday, October 29, 2025 at 11:53:41 AM Central European Standard Time
* DO NOT EDIT THIS FILE DIRECTLY!
* Your changes will be overwritten.
* Instead, go to the preferences and edit the mods there.
*/

/* Name: Animations Plus */
/* Description: A nice animation pack for Zen Browser */
/* Author: @Anoms12 */
.tab-background {
  transition:
    background-color 0.4s ease,
    box-shadow 0.4s ease,
    background 0.5s ease !important;
}

.tab-group-label-container {
  transition:
    background-color 0.4s ease,
    box-shadow 0.4s ease,
    background 0.5s ease !important;
}

.toolbarbutton-1 {
  &:hover
    > :is(
      .toolbarbutton-icon,
      .toolbarbutton-text,
      .toolbarbutton-badge-stack
    ) {
    transition:
      background-color 0.3s ease-in-out,
      outline-color 0.3s ease-in-out; /* Smooth transition */
  }

  > :is(.toolbarbutton-icon, .toolbarbutton-text, .toolbarbutton-badge-stack) {
    transition:
      background-color 0.3s ease-in-out,
      outline-color 0.3s ease-in-out;
  }
}

.identity-box-button {
  transition:
    background-color 0.3s ease-in-out,
    outline-color 1.3s ease-in-out;
}

/* Apply transition to urlbar controls, this is what I found worked...*/
#reader-mode-button,
#star-button-box,
#zen-split-views-box,
#pageActionButton,
#urlbar-zoom-button,
#shopping-sidebar-button,
#translations-button,
#picture-in-picture-button,
#page-action-buttons,
#urlbar-go-button,
#urlbar-revert-button-container {
  transition:
    background-color 0.3s ease-in-out,
    outline-color 0.3s ease-in-out !important;
}

/* Animate the tab function icons */
.close-icon {
  transition: background-color 0.3s ease-in-out; /* Smooth transition for background-color */
}

.tab-reset-button {
  transition: background-color 0.3s ease-in-out; /* Smooth transition for background-color */
} /* Transition properties for tab background */
.tab-background {
  transition:
    background-color 0.4s ease,
    box-shadow 0.4s ease,
    background 0.5s ease !important;
}

.tab-group-label-container {
  /* Transition properties for tab background */
  transition:
    background-color 0.4s ease,
    box-shadow 0.4s ease,
    background 0.5s ease !important;
}

/* For toolbarbutton-1 */
.toolbarbutton-1 {
  &:hover
    > :is(
      .toolbarbutton-icon,
      .toolbarbutton-text,
      .toolbarbutton-badge-stack
    ) {
    transition:
      background-color 0.3s ease-in-out,
      outline-color 0.3s ease-in-out; /* Smooth transition */
  }

  > :is(.toolbarbutton-icon, .toolbarbutton-text, .toolbarbutton-badge-stack) {
    transition:
      background-color 0.3s ease-in-out,
      outline-color 0.3s ease-in-out;
  }
}

.identity-box-button {
  transition:
    background-color 0.3s ease-in-out,
    outline-color 1.3s ease-in-out;
}

/* Apply transition to urlbar controls, this is what I found worked...*/
#reader-mode-button,
#star-button-box,
#zen-split-views-box,
#pageActionButton,
#urlbar-zoom-button,
#shopping-sidebar-button,
#translations-button,
#picture-in-picture-button,
#page-action-buttons,
#urlbar-go-button,
#urlbar-revert-button-container {
  transition:
    background-color 0.3s ease-in-out,
    outline-color 0.3s ease-in-out !important;
}

/* Animate the tab function icons */
.close-icon {
  transition: background-color 0.3s ease-in-out; /* Smooth transition for background-color */
}

.tab-reset-button {
  transition: background-color 0.3s ease-in-out; /* Smooth transition for background-color */
}

/* This was not being applied properly by class for some reason */
#tabs-newtab-button {
  transition: background-color 0.3s ease-in-out; /* Smooth transition for background-color */
}

/* Other things that needed to be animated/transitioned */
.subviewbutton {
  transition: background-color 0.3s ease-in-out !important; /* Smooth transition for background-color */
}

.urlbarView-row-inner {
  transition: background-color 0.3s ease-in-out !important; /* Smooth transition for background-color */
}

/* This was not being applied properly by class for some reason */
#tabs-newtab-button {
  transition: background-color 0.3s ease-in-out; /* Smooth transition for background-color */
}

/* Other things that needed to be animated/transitioned */
.subviewbutton {
  transition: background-color 0.3s ease-in-out !important; /* Smooth transition for background-color */
}

.urlbarView-row-inner {
  transition: background-color 0.3s ease-in-out !important; /* Smooth transition for background-color */
}

/* Name: Floating Status Bar */
/* Description: Mod for Zen Browser that detaches the status bar from the bottom left corner of the browser window. */
/* Author: @AmirhBeigi */
#statuspanel {
  margin: 10px !important;
}

#statuspanel-label {
  border-radius: 10000px !important;
  padding: 2px 10px !important;
  border: 1px solid var(--zen-colors-border) !important;
  background: var(--zen-colors-tertiary) !important;
}

/* Name: Better Letterboxing */
/* Description: More pleasant, theme-friendly, and most importantly, rounded letterboxing. */
/* Author: @qtchaos */
.browserContainer {
  background: linear-gradient(
    90deg,
    var(--zen-colors-secondary) 0%,
    var(--zen-colors-primary) 100%
  );
}

stack > browser {
  border-radius: 10px !important;
}

/* Name: Load Bar */
/* Description: Creates a sleek loading bar and mute status for single toolbar mode. */
/* Author: @Tanay-Kar */
@media (-moz-bool-pref: "zen.view.use-single-toolbar") {
    .browserSidebarContainer.deck-selected::before {
      content: "" !important;
      position: absolute !important;
      top: 0px !important;
      left: 0px !important;
      height: 4px !important; /* Height of the top background */
      max-width: 100% !important;
      width: var(--bar-pcent) !important; /* Ensure full width or customizable width */
      background-color: var(--bar-colour) !important; /* Solid color for the bar */
      border-radius: 0 2px 2px 0; /* Adjust this value to control the roundness of the ends */
      z-index: 1 !important;
      transition: width 0.5s ease-in-out, background 0.2s ease !important; /* Apply smooth transition on width and background */
    }    /* Current tab loading progress and muted status */
    
    
    .browserSidebarContainer.deck-selected:has([zen-glance-selected])::before,
    .browserSidebarContainer.deck-selected.zen-glance-overlay::before {
      max-width: calc(85%) !important;
      left: calc(15%/2) !important;
      border-radius: 6px !important;
    }
    
    .browserSidebarContainer.deck-selected.zen-glance-background::before {
      background: transparent !important;
      height: 0px !important;
    }
    
    :root {
      &:has(.tabbrowser-tab[selected][busy]) {
        --bar-colour: var(--zen-primary-color);
        --bar-pcent: 15%;
      }
      &:has(.tabbrowser-tab[selected][busy][pendingicon]) {
        --bar-colour: var(--zen-primary-color);
        --bar-pcent: 45%;
      }
      &:has(.tabbrowser-tab[selected][busy][pendingicon][progress]) {
        --bar-colour: var(--zen-primary-color);
        --bar-pcent: 85%;
      }
      &:has(.tabbrowser-tab[selected][busy][progress]) {
        --bar-colour: var(--zen-primary-color);
        --bar-pcent: 95%;
      }
      &:has(.tabbrowser-tab[selected][muted]:not([busy])) {
        --bar-colour: orangered;
        --bar-pcent: 100%;
        
        .browserSidebarContainer.deck-selected::before {
          border-radius: 0;
        }
      }
    }
  }

/* Name: Bleeding Corners Fix */
/* Description: Fixes the white outlines (or artifacts) on the rounded corners that can appear on some pages. May cause higher GPU usage on some devices. */
/* Author: @rsiebertdev */
html:not([sizemode="fullscreen"]) {
	.browserStack, browser {
		clip-path: inset(0 round var(--zen-native-inner-radius));
	}
}

/* Name: Left Side Glance Buttons */
/* Description: Move the at a glance buttons to the left side of the window. */
/* Author: @psu */

/**
* Zen Mod: Right Left Glance Buttons
* Move the at a glance buttons to the right side of the window.
* Pontus Sund√©n <hi@pontus.cc>
*/
.zen-glance-sidebar-container {
  right: 100% !important;
  left: unset !important;
}

/* Name: Extensions List */
/* Description: Use a list instead of the default grid on the extensions popout */
/* Author: @dagadtwok */

#zen-site-data-addons {
    display: block !important;

#overflowed-extensions-list,
    & #unified-extensions-area,
    & .unified-extensions-list,
    & #zen-site-data-new-addon-button-container {
        &>* {
            width: 100% !important;
            height: auto !important;
            justify-content: normal !important;
            align-items: normal !important;
            margin-top: 5px !important;
        }

.unified-extensions-item-name {
            display: block !important;
        }
    }
}

/* Name: Better Unloaded Tabs */
/* Description: Makes unloaded tabs easier to notice by making them greyscale and transparent. */
/* Author: @Felkazz */
.tabbrowser-tab[pending="true"] {
  filter: grayscale(1);
  opacity: 0.5;
}

/* Name: Tab Preview Enhanced */
/* Description: Enhanced tab preview, respecting user background color and padding */
/* Author: @Kaedriz */
#tab-preview-panel {
	/* Matches Zen main background color, also supports gradients */
	@media (-moz-bool-pref: 'zen.mods.TabPreviewEnhanced.enabledBackgroundNative') {
		--panel-background: var(--zen-main-browser-background-toolbar) !important;
	}

	/* Matches Zen panel radius */
	@media not (-moz-bool-pref: 'zen.mods.TabPreviewEnhanced.enabledCustomBorderRadius') {
		border-radius: var(--panel-border-radius) !important;
	}

	/* Custom border radius for tab preview*/
	@media (-moz-bool-pref: 'zen.mods.TabPreviewEnhanced.enabledCustomBorderRadius') {
		--panel-border-radius: var(
			--zen-mods-TabPreviewEnhanced-borderRadiusAmount
		) !important;
	}

	/* Removes border around tab preview */
	--zen-appcontent-border: transparent !important;

	/* Shifts panel to the slightly right */
	/* TODO: Make customizable */
	margin-left: 0.5em !important;
}

.tab-preview-thumbnail-container {
	/* Fixes proper tab preview image sizing */
	&:has(canvas) {
		@media (-moz-bool-pref: 'zen.mods.TabPreviewEnhanced.enabledMargins') {
			/* Add padding around tab preview image */
			padding: var(--zen-element-separation);
		}

		/* Hide border above preview */
		border-top: none !important;

		/* Hides padding between tab preview image and tab preview title */
		padding-top: 0 !important;

		/* Shrink preview to match added padding */
		/* TODO: Make optional */
		width: calc(var(--panel-width) - (var(--zen-element-separation) * 2)) px !important;
		height: unset !important;

		/* Some safety code to maintain aspect ratio */
		aspect-ratio: 2 / 1 !important;
	}

	canvas {
		/* Matches Zen panel radius */
		@media not (-moz-bool-pref: 'zen.mods.TabPreviewEnhanced.enabledCustomBorderRadius') {
			border-radius: calc(var(--panel-border-radius) / 1.3) !important;
		}

		/* Custom border radius for tab preview image */
		@media (-moz-bool-pref: 'zen.mods.TabPreviewEnhanced.enabledCustomBorderRadius') {
			border-radius: calc(
				var(--zen-mods-TabPreviewEnhanced-borderRadiusAmount) / 1.3
			) !important;
		}
	}
}

/* Name: Better CtrlTab Panel */
/* Description: Re-style and add customization options for the CtrlTab panel. */
/* Author: @psu */
/**
* Zen Mod: Better CtrlTab Panel
* Re-style and add customization options for the Ctrl+Tab panel.
* Pontus Sund√©n <hi@pontus.cc>
*/
@-moz-document url-prefix("chrome:") {
  :root {
    /**
    --psu-better_ctrltab-roundness: 50px;
    --psu-better_ctrltab-padding: 35px;
    --psu-better_ctrltab-zoom: .8;

    --psu-better_ctrltab-background: light-dark(rgba(146, 145, 144, 0.94), rgba(24, 23, 22, 0.94));
    --psu-better_ctrltab-shadow_size: 20px;
    
    --psu-better_ctrltab-preview_padding: 30px;
    --psu-better_ctrltab-preview_border_width: 1px;
    --psu-better_ctrltab-preview_border_color: light-dark(rgba(253, 255, 254, 0.1), rgba(83, 82, 79, 0.2));
    --psu-better_ctrltab-preview_focus_background: light-dark(rgba(77, 76, 78, 0.8), rgba(184, 185, 183, 0.18));
    --psu-better_ctrltab-preview_font_size: 13px; 
    --psu-better_ctrltab-preview_letter_spacing: 0px;
    
    --psu-better_ctrltab-preview_favicon_size: 36px;
    --psu-better_ctrltab-preview_favicon_outdent: 12px;
/**/

    /* helpers */
    --psu-zoom-invert: pow(var(--psu-better_ctrltab-zoom), -1);
    --psu-roundness-zoomed: calc(var(--psu-better_ctrltab-roundness) * var(--psu-better_ctrltab-zoom));
  }

  #ctrlTab-panel {
    /* panel styling */
    --panel-border-radius: var(--psu-roundness-zoomed) !important;
    --panel-shadow: 0 0 var(--psu-better_ctrltab-shadow_size) calc(var(--psu-better_ctrltab-shadow_size) / 3) rgba(1, 1, 4, 0.2) !important;
    --panel-background: var(--psu-better_ctrltab-background) !important;
    --panel-padding: 0 !important;
    margin: 0 !important;
    padding: 0 !important;
    background-color: unset !important;

    /* panel zoom adjust size */
    --psu-default_spacing: 10%;
    --psu-tile-counter: 0;
    &:has(.ctrlTab-preview:nth-child(1):not([hidden])) {
      --psu-tile-counter: 1;
    }
    &:has(.ctrlTab-preview:nth-child(2):not([hidden])) {
      --psu-tile-counter: 2;
    }
    &:has(.ctrlTab-preview:nth-child(3):not([hidden])) {
      --psu-tile-counter: 3;
    }
    &:has(.ctrlTab-preview:nth-child(4):not([hidden])) {
      --psu-tile-counter: 4;
    }
    &:has(.ctrlTab-preview:nth-child(5):not([hidden])) {
      --psu-tile-counter: 5;
    }
    &:has(.ctrlTab-preview:nth-child(6):not([hidden])) {
      --psu-tile-counter: 6;
    }
    &:has(.ctrlTab-preview:nth-child(7):not([hidden])) {
      --psu-tile-counter: 7;
      --psu-default_spacing: 7%;
    }
    --panel-shadow-margin: var(--psu-better_ctrltab-shadow_size)
      calc(
        /* decrease by default non-css space */ var(--psu-default_spacing) + (90% - var(--psu-default_spacing)) / 2 * (1 - var(--psu-better_ctrltab-zoom)) -
          (
            /* increase by tile padding and borders */ ((var(--psu-better_ctrltab-preview_padding) * 2 + var(--psu-better_ctrltab-preview_border_width) * 2) * var(--psu-tile-counter)) / 2
              /* increase by panel padding */ + (var(--psu-better_ctrltab-padding) * 0.8)
          ) * var(--psu-better_ctrltab-zoom)
      ) !important;

    #ctrlTab-previews {
      /* panel zoom and padding*/
      zoom: var(--psu-better_ctrltab-zoom) !important;
      padding: var(--psu-better_ctrltab-padding) calc(var(--psu-better_ctrltab-padding) * 0.8) !important;

      .ctrlTab-preview {
        margin: 0 !important;
        padding: 0 !important;
        border-radius: calc(var(--psu-roundness-zoomed) * 0.8) !important;

        /* previews styling */
        .ctrlTab-preview-inner {
          margin: 0 !important;
          padding: calc(var(--psu-better_ctrltab-preview_padding) + var(--psu-better_ctrltab-preview_border_width)) !important;
          border-radius: calc(var(--psu-roundness-zoomed) * 0.8) !important;
          padding-bottom: calc(var(--psu-better_ctrltab-preview_padding) / 2) !important;
          border: none !important;
          text-shadow: 0.5px 0.5px 0px light-dark(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5));
        }
        .ctrlTab-canvas {
          margin-bottom: calc(var(--psu-better_ctrltab-preview_padding) / 2 + var(--psu-better_ctrltab-preview_border_width)) !important;
          box-shadow: 0 0 0 var(--psu-better_ctrltab-preview_border_width) var(--psu-better_ctrltab-preview_border_color) !important;
        }
        .ctrlTab-canvas,
        img,
        canvas {
          border-radius: calc(var(--psu-roundness-zoomed) * 0.25) !important;
        }

        /* label styling */
        .ctrlTab-label {
          font-size: calc(var(--psu-better_ctrltab-preview_font_size) * var(--psu-zoom-invert)) !important;
          letter-spacing: calc(var(--psu-better_ctrltab-preview_letter_spacing) * var(--psu-zoom-invert));
          margin: 0 calc(var(--psu-better_ctrltab-preview_border_width) * -1) !important;
          padding: 0 !important;
        }

        /* favicon styling and position */
        .ctrlTab-favicon-container image {
          height: var(--psu-better_ctrltab-preview_favicon_size) !important;
          width: var(--psu-better_ctrltab-preview_favicon_size) !important;
          box-shadow: none !important;
          background: none !important;
          position: absolute !important;
          padding: 0 !important;
          margin: 0 !important;
          margin-right: calc(var(--psu-better_ctrltab-preview_favicon_outdent) * -1) !important;
          margin-top: calc(
            (var(--psu-better_ctrltab-preview_padding) / 2 + var(--psu-better_ctrltab-preview_border_width)) * -1 - var(--psu-better_ctrltab-preview_favicon_size) +
              var(--psu-better_ctrltab-preview_favicon_outdent) * 0.8
          ) !important;
        }

        /* focused bg styling */
        &:focus {
          .ctrlTab-preview-inner {
            background: var(--psu-better_ctrltab-preview_focus_background) !important;
            border: none !important;
          }
        }
      }
    }
  }
}

/* Name: Better Active Tab */
/* Description: Adds a bright line next to the active tab to better highlight it. */
/* Author: @HliasOuzounis */
.tab-background {
  position: relative;
}

.tab-background[selected=""]::after {
  content: "";
  position: absolute;
  width: 3px;
  height: 100%;
  background-color: var(--zen-primary-color);
}

/* Name: Vertical Split Tab Groups */
/* Description: Display tab groups created from split tabs as vertical lists instead of horizontal ones. */
/* Author: @ToBinio */
tab-group[split-view-group] .tab-group-container {
    display: flex;
    flex-direction: column;
    padding: 2px 2px !important;
    position: relative;

    &::after {
        content: "";
        width: 3px;
        height: calc(100% - 8px);
        background-color: var(--tab-selected-bgcolor);
        position: absolute;
        left: 2px;
        top: 50%;
        transform: translateY(-50%);
        border-radius: 2px;
    }

    &:hover,
    &:has(> tab:is([visuallyselected], [multiselected])) {
        &::after {
            width: 0;
        }
    }

    & > .tabbrowser-tab {
        &:not(:last-child)::after {
            width: 0 !important;
            height: 0 !important;
        }
    }
}

/* Name: SuperPins */
/* Description: This Zen Mod enhances pinned tabs/Essentials, by making some UI/UX changes. */
/* Author: @CosmoCreeper */
@media (-moz-bool-pref: "zen.tabs.vertical") {

    /* Prevents stuff from being clipped off from bottom of Essentials */
    #zen-essentials-container, .zen-essentials-container {
        overflow: visible !important;
    }

    /* Makes essentials transparent (when toggled) */
    :root:has(#theme-SuperPins[uc-essentials-color-scheme="transparent"]) {
        .tabbrowser-tab[zen-essential="true"]:not(:hover):not([selected="true"]) .tab-stack .tab-background {
            background-color: transparent !important;
        }
    }

    @media (-moz-bool-pref: "zen.view.sidebar-expanded") and (not (-moz-bool-pref: "zen.view.sidebar-expanded.on-hover")) {

        /* Default essentials-width and essentials-gap variables (set to browser default) to fix some bugs */
        :root {
            --essentials-width: 49px;
            --essentials-gap: calc(var(--zen-toolbox-padding) - 2px);
        }

        /* Set width of Essentials (Dropdown) */
        :root:has(#theme-SuperPins[uc-essentials-width="Thin"]) {
            --essentials-width: 50px;
        }

        :root:has(#theme-SuperPins[uc-essentials-width="Normal"]) {
            --essentials-width: 60px;
        }

        :root:has(#theme-SuperPins[uc-essentials-width="Wide"]) {
            --essentials-width: 70px;
        }

        :root:has(#theme-SuperPins[uc-essentials-width="Thin"],
            #theme-SuperPins[uc-essentials-width="Normal"],
            #theme-SuperPins[uc-essentials-width="Wide"]) {
            #zen-essentials-container, .zen-essentials-container {
                grid-template-columns: repeat(auto-fit,
                        minmax(var(--essentials-width), auto)) !important;
            }

            .zen-essentials-container {
                max-width: calc(100% - var(--zen-toolbox-padding) * 2);
            }

            @media (-moz-bool-pref: "uc.essentials.grid-count") {
                #zen-essentials-container, .zen-essentials-container {
                    grid-template-columns: repeat(var(--mod-superpins-essentials-grid-count), minmax(var(--essentials-width), auto)) !important;
                }
            }
        }

        /* Set margin between Essentials (Dropdown) */
        :root:has(#theme-SuperPins[uc-essentials-gap="Small"]) {
            --essentials-gap: 0px;
        }

        :root:has(#theme-SuperPins[uc-essentials-gap="Normal"]) {
            --essentials-gap: 2px;
        }

        :root:has(#theme-SuperPins[uc-essentials-gap="Big"]) {
            --essentials-gap: 5px;
        }

        :root:has(#theme-SuperPins[uc-essentials-gap="Small"],
            #theme-SuperPins[uc-essentials-gap="Normal"],
            #theme-SuperPins[uc-essentials-gap="Big"]) {
            #zen-essentials-container, .zen-essentials-container {
                gap: var(--essentials-gap) var(--essentials-gap) !important;
            }
        }
    }

    :root:has(#theme-SuperPins[uc-tabs-show-separator="never"]) {
        .vertical-pinned-tabs-container-separator, .pinned-tabs-container-separator {
            display: none !important;
        }

        #vertical-pinned-tabs-container>.zen-workspace-tabs-section,
        .zen-workspace-pinned-tabs-section {
            &:has(> :nth-child(2)) {
                padding-bottom: 5px !important;
            }
        }
    }

    /* Enables legacy layout for pinned tabs (icon only in grid) */
    @media (-moz-bool-pref: "uc.pins.legacy-layout") {
        #navigator-toolbox[zen-sidebar-expanded="true"] {
            & #tabbrowser-tabs {
                & .tabbrowser-tab {
                    &[zen-pinned-changed="true"]:not([zen-essential])
                    > .tab-stack
                    > .tab-content
                    > .tab-icon-stack {
                    position: unset !important;
                    top: unset !important;
                    }
                }
            }
        }

        #vertical-pinned-tabs-container, .zen-workspace-pinned-tabs-section {
            .tabbrowser-tab[pinned]  {
                .tab-close-button, .tab-reset-button,
                .tab-reset-pin-button, .tab-label-container {
                    display: none !important;
                }
            }
        }

        /*disable icon shift when tab was renamed*/
        #navigator-toolbox[zen-sidebar-expanded="true"] {
            & #vertical-pinned-tabs-container>.zen-workspace-tabs-section,
            & .zen-workspace-pinned-tabs-section {
                & .tabbrowser-tab>.tab-stack>.tab-content>.tab-icon-stack {
                    left: unset !important;
                }
            }
        }

        /* Make pinned tabs auto-grow to span full width of row */
        @media (-moz-bool-pref: "uc.pins.auto-grow") {
            #vertical-pinned-tabs-container>.zen-workspace-tabs-section,
            .zen-workspace-pinned-tabs-section {
                display: flex !important;
                flex-wrap: wrap !important;
                flex-direction: row !important;

                &>.tabbrowser-tab {
                    width: auto !important;
                    min-width: var(--tab-pinned-min-width-expanded) !important;
                    flex: 1 1 auto !important;
                }

                &>tab-group {
                    width: 100% !important;
                }
            }

            @media (-moz-bool-pref: "uc.pins.grid-count") {
                /* Logic for pinned tabs that have auto-grow and grid-count. Must use +1 to fix */
                #vertical-pinned-tabs-container>.zen-workspace-tabs-section,
                .zen-workspace-pinned-tabs-section {
                    &>.tabbrowser-tab {
                        width: calc(100% / (var(--mod-superpins-pins-grid-count) + 1)) !important;
                    }
                }
            }
        }

        @media (not (-moz-bool-pref: "uc.pins.auto-grow")) {
            #vertical-pinned-tabs-container>.zen-workspace-tabs-section,
            .zen-workspace-pinned-tabs-section {
                grid-template-columns: repeat(auto-fit, minmax(var(--tab-pinned-min-width-expanded), auto)) !important;
                display: grid !important;
            }

            @media (-moz-bool-pref: "uc.pins.grid-count") {
                #vertical-pinned-tabs-container>.zen-workspace-tabs-section,
                .zen-workspace-pinned-tabs-section {
                    grid-template-columns: repeat(var(auto-fit, --mod-superpins-pins-grid-count), minmax(var(--tab-pinned-min-width-expanded), auto)) !important;
                }
            }
        }

        /*The actual grid layout*/
        #vertical-pinned-tabs-container>.zen-workspace-tabs-section,
        .zen-workspace-pinned-tabs-section {
            &:has(> :nth-child(2)) {
                margin: 0 var(--zen-toolbox-padding) !important;
                padding: 0 var(--zen-toolbox-padding) !important;
                overflow: visible !important;
                padding-bottom: 17px !important;
                gap: 3px 3px !important;
                max-width: calc(100% - var(--zen-toolbox-padding) * 2) !important;
            }

            .tabbrowser-tab {
                --toolbarbutton-inner-padding: 0;
            }

            &>*:not(tab-group) {
                margin: 0 !important;
            }

            &>tab-group .tab-icon-stack {
                margin: auto !important;
            }
        }

        .zen-workspace-pinned-tabs-section {
            position: relative !important;

            .tab-icon-stack {
                margin-left: 50% !important;
                transform: translateX(-50%) !important;
            }
        }

        .vertical-pinned-tabs-container-separator, .pinned-tabs-container-separator {
            position: absolute !important;
            bottom: 7px !important;
            left: 50% !important;
            transform: translateX(-50%) !important;
            width: calc(100% - var(--zen-toolbox-padding) * 2) !important;
        }

        @media (-moz-bool-pref: "arcline.superpin") {
            .vertical-pinned-tabs-container-separator, .pinned-tabs-container-separator {
                bottom: -4px !important;
            }
        }
    }

    /* Make Essentials look more box like */
    @media (-moz-bool-pref: "uc.essentials.box-like-corners") {
        .tabbrowser-tab[zen-essential="true"] .tab-stack .tab-background {
            border-radius: 5px !important;
        }
    }

    /* If Essentials have a grid count but do not have auto-grow on */
    @media (-moz-bool-pref: "uc.essentials.grid-count") {
        #zen-essentials-container, .zen-essentials-container {
            grid-template-columns: repeat(var(--mod-superpins-essentials-grid-count), minmax(var(--essentials-width), auto)) !important;
        }
    }

    /* Make Essentials auto-grow to span full width of a row */
    @media (-moz-bool-pref: "uc.essentials.auto-grow") {
        .tabbrowser-tab[zen-essential="true"] {
            width: auto !important;
            min-width: var(--essentials-width) !important;
            flex: 1 1 auto !important;
        }

        @media (-moz-bool-pref: "uc.essentials.grid-count") {

            /* For auto-grow with grid-count. must use +1 to fix a bug */
            .tabbrowser-tab[zen-essential="true"] {
                width: calc(100% / (var(--mod-superpins-essentials-grid-count) + 1)) !important;
            }
        }

        #zen-essentials-container, .zen-essentials-container {
            display: flex !important;
            flex-wrap: wrap !important;
            flex-direction: row !important;
            width: 100% !important;
        }

        #navigator-toolbox {
            min-width: min-content !important;
        }
    }

    /* Puts Essentials at the bottom */
    :root:has(#theme-SuperPins[uc-essentials-position="bottom"]) {
        #tabbrowser-arrowscrollbox {
            position: relative !important;
            overflow-x: hidden !important;
        }
        
        .zen-essentials-container {
            position: relative !important;
            margin-top: auto !important;
            padding-top: 8px !important;
        }

        /* Adds padding-bottom only when media controls are visible */
        #zen-media-controls-toolbar:not([hidden]) ~ .zen-essentials-container {
            padding-bottom: 10px !important;
        }
        
        #zen-essentials-container, #zen-essentials {
            order: 999 !important;
        }

        #tabbrowser-arrowscrollbox > zen-workspace {
            width: 100% !important;
            padding-top: 0 !important;
        }

        #navigator-toolbox[zen-sidebar-expanded="true"] {
            .zen-essentials-container {
                min-width: 100% !important;
                width: 100% !important;
            }
        }
    }

    /* Adds a little bg to the pinned tabs */
    @media (-moz-bool-pref: "uc.pins.bg") {
        @media (prefers-color-scheme: light) {
            :root {
                --pins-bg-percentage: 40%;
            }
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --pins-bg-percentage: 7%;
            }
        }

        /* background color of pinned tabs in a normal state (not hovered/selected) */
        .tabbrowser-tab[pinned]:not([zen-essential="true"]) .tab-stack .tab-background {
            background-color: color-mix(in srgb, white var(--pins-bg-percentage), transparent) !important;
        }

        /* background color when hovering */
        .tabbrowser-tab[pinned]:not([zen-essential="true"]):hover .tab-stack .tab-background {
            background-color: color-mix(in srgb, white calc(var(--pins-bg-percentage) + 3%), transparent) !important;
        }

        /* background color when selected */
        .tabbrowser-tab[pinned]:not([zen-essential="true"])[selected="true"] .tab-stack .tab-background,
        .tabbrowser-tab[pinned]:not([zen-essential="true"])[multiselected="true"] .tab-stack .tab-background {
            background-color: color-mix(in srgb, white calc(var(--pins-bg-percentage) + 16%), transparent) !important;
        }

        /* background color when selected and hovering*/
        .tabbrowser-tab[pinned]:not([zen-essential="true"])[selected="true"]:hover .tab-stack .tab-background,
        .tabbrowser-tab[pinned]:not([zen-essential="true"])[multiselected="true"]:hover .tab-stack .tab-background {
            background-color: color-mix(in srgb, white calc(var(--pins-bg-percentage) + 18%), transparent) !important;
        }
    }

    /* Adds border to Pins/Essentials (when toggled) */
    :root:has(#theme-SuperPins[uc-superpins-border="essentials"]) {
        #zen-essentials-container, .zen-essentials-container {
            & .tabbrowser-tab[zen-essential="true"] .tab-stack .tab-background {
                border: 1px solid light-dark(color-mix(in srgb, var(--zen-colors-secondary) 80%, black),
                        color-mix(in srgb, var(--zen-colors-secondary) 80%, white)) !important;
            }
        }
    }

    :root:has(#theme-SuperPins[uc-superpins-border="pins"]) {
        .tabbrowser-tab[pinned]:not([zen-essential="true"]) .tab-stack .tab-background,
        #vertical-pinned-tabs-container>.zen-workspace-tabs-section tab-group,
        .zen-workspace-pinned-tabs-section tab-group {
            border: 1px solid light-dark(color-mix(in srgb, var(--zen-colors-secondary) 80%, black),
                    color-mix(in srgb, var(--zen-colors-secondary) 80%, white)) !important;
        }
    }

    :root:has(#theme-SuperPins[uc-superpins-border="both"]) {
        .tabbrowser-tab[pinned] .tab-stack .tab-background,
        #vertical-pinned-tabs-container>.zen-workspace-tabs-section tab-group,
        .zen-workspace-pinned-tabs-section tab-group {
            border: 1px solid light-dark(color-mix(in srgb, var(--zen-colors-secondary) 80%, black),
                    color-mix(in srgb, var(--zen-colors-secondary) 80%, white)) !important;
        }
    }

    /* Let pinned tabs have the same selected styling as essentials */
    @media (-moz-bool-pref: "uc.pins.essentials-layout") {

        /* Specific query to overwrite previous one */
        #vertical-pinned-tabs-container>.zen-workspace-tabs-section,
        .zen-workspace-pinned-tabs-section {
            grid-template-columns: repeat(auto-fit, minmax(var(--essentials-width), auto)) !important;

            &:has(> :nth-child(2)) {
                gap: var(--essentials-gap) var(--essentials-gap) !important;
            }

            &>.tabbrowser-tab {
                min-width: var(--essentials-width) !important;
            }
        }

        @media (-moz-bool-pref: "uc.pins.grid-count") {
            #vertical-pinned-tabs-container>.zen-workspace-tabs-section,
            .zen-workspace-pinned-tabs-section {
                grid-template-columns: repeat(var(auto-fit, --mod-superpins-pins-grid-count), minmax(var(--essentials-width), auto)) !important;
            }
        }
    }

    /* pins height */
    :root {
        --pins-height: var(--tab-min-height);
    }

    :root:has(#theme-SuperPins[uc-pinned-height="small"]) {
        --pins-height: 40px;
    }

    :root:has(#theme-SuperPins[uc-pinned-height="normal"]) {
        --pins-height: 50px;
    }

    :root:has(#theme-SuperPins[uc-pinned-height="large"]) {
        --pins-height: 60px;
    }

    :root:has(#theme-SuperPins[uc-pinned-height="small"]),
    :root:has(#theme-SuperPins[uc-pinned-height="normal"]),
    :root:has(#theme-SuperPins[uc-pinned-height="large"]) {
        .zen-workspace-pinned-tabs-section .tabbrowser-tab {
            height: var(--pins-height) !important;
        }
    }

    @media (-moz-bool-pref: "uc.essentials.same-height") {
        .tabbrowser-tab[zen-essential] {
            height: var(--pins-height) !important;
        }

        .tabbrowser-tab[zen-essential] .tab-background {
            min-height: var(--pins-height) !important;
        }
    }

    /* favicon size */
    :root:has(#theme-SuperPins[uc-favicon-size="small"]) {

        .tab-icon-pending,
        .tab-icon-image,
        .tab-sharing-icon-overlay,
        .tab-icon-overlay {
            height: 16px !important;
            width: 16px !important;
        }

        /* No need to scale tab throbber as it is same size. */
    }

    :root:has(#theme-SuperPins[uc-favicon-size="normal"]) {

        .tab-icon-pending,
        .tab-icon-image,
        .tab-sharing-icon-overlay,
        .tab-icon-overlay {
            height: 18px !important;
            width: 18px !important;
        }

        .tab-throbber {
            transform: scale(1.125) !important;
        }
    }

    :root:has(#theme-SuperPins[uc-favicon-size="large"]) {

        .tab-icon-pending,
        .tab-icon-image,
        .tab-sharing-icon-overlay,
        .tab-icon-overlay {
            height: 20px !important;
            width: 20px !important;
        }

        .tab-throbber {
            transform: scale(1.25) !important;
        }
    }

    /* workspace icons size */
    :root:has(#theme-SuperPins[uc-workspace-icon-size="x-small"]) {
        #zen-workspaces-button {
            font-size: x-small !important;
        }
    }

    :root:has(#theme-SuperPins[uc-workspace-icon-size="small"]) {
        #zen-workspaces-button {
            font-size: small !important;
        }
    }

    :root:has(#theme-SuperPins[uc-workspace-icon-size="medium"]) {
        #zen-workspaces-button {
            font-size: medium !important;
        }
    }

    :root:has(#theme-SuperPins[uc-workspace-icon-size="large"]) {
        #zen-workspaces-button {
            font-size: large !important;
        }
    }

    /* current workspace icons size */
    :root:has(#theme-SuperPins[uc-workspace-current-icon-size="small"]) {
        .zen-current-workspace-indicator .zen-current-workspace-indicator-icon {
            font-size: 12px !important;
        }
    }

    :root:has(#theme-SuperPins[uc-workspace-current-icon-size="normal"]) {
        .zen-current-workspace-indicator .zen-current-workspace-indicator-icon {
            font-size: 14.5px !important;
        }
    }

    :root:has(#theme-SuperPins[uc-workspace-current-icon-size="large"]) {
        .zen-current-workspace-indicator .zen-current-workspace-indicator-icon {
            font-size: 16px !important;
        }
    }

    /* Increase margin below Essentials in case the workspace indicator is not visible. */
    @media (not (-moz-bool-pref: "zen.workspaces.show-workspace-indicator")) {
        .zen-current-workspace-indicator {
            display: none !important;
        }

        .zen-essentials-container {
            padding-bottom: 5px;
        }

        :root:has(#theme-SuperPins[uc-tabs-show-separator="essentials-shown"]) {
            zen-workspace[active="true"]:has(.zen-workspace-pinned-tabs-section .tabbrowser-tab) {
                &:has(~ #zen-tabs-wrapper #zen-browser-tabs-container #vertical-pinned-tabs-container .zen-workspace-tabs-section[active="true"] .tabbrowser-tab) {
                    margin-top: 6px !important;
                }
            }

            #zen-essentials-container, .zen-essentials-container {
                &:has(> :nth-child(1))~#zen-tabs-wrapper #zen-browser-tabs-container #vertical-pinned-tabs-container>.zen-workspace-tabs-section {
                    min-height: 20px !important;
                }
            }

            #zen-essentials-container, .zen-essentials-container {
                &:has(> :nth-child(1))~#zen-tabs-wrapper #zen-browser-tabs-container #vertical-pinned-tabs-container>.zen-workspace-tabs-section {
                    .vertical-pinned-tabs-container-separator, .pinned-tabs-container-separator {
                        max-height: unset !important;
                    }
                }
            }
        }

        :root:not(:has(#theme-SuperPins[uc-tabs-show-separator="essentials-shown"])) {
            #tabbrowser-tabs:has(.zen-essentials-container) #zen-tabs-wrapper {
                margin-top: 6px !important;
            }
        }
    }

    /* Ensure that the browser uses SuperPins dim rather than the built-in dim-pending. */
    .tab-icon-image[pending="true"],
    .tabbrowser-tab[pending="true"] .tab-text {
        opacity: 1 !important;
    }

    /* If dim-type is set to icons. */
    :root:has(#theme-SuperPins[uc-tabs-dim-type="icons"]) {
        .tab-icon-image[pending="true"] {
            opacity: 0.5 !important;
        }
    }

    /* If dim-type is set to text. */
    :root:has(#theme-SuperPins[uc-tabs-dim-type="text"]) {
        .tabbrowser-tab[pending="true"] .tab-text {
            opacity: 0.5 !important;
        }
    }

    /* If dim-type is set to icon + text. */
    :root:has(#theme-SuperPins[uc-tabs-dim-type="both"]) {

        .tab-icon-image[pending="true"],
        .tabbrowser-tab[pending="true"] .tab-text {
            opacity: 0.5 !important;
        }
    }

    @media (-moz-bool-pref: "uc.tabs.strikethrough-on-pending") {
        .tabbrowser-tab[pending="true"] .tab-text {
            text-decoration: line-through !important;
        }
    }

    @media (-moz-bool-pref: "uc.pins.stay-at-top") {
        zen-workspace > arrowscrollbox.workspace-arrowscrollbox {
            overflow-y: hidden !important;
            flex-basis: 100%;
        }

        #tabbrowser-arrowscrollbox .zen-workspace-pinned-tabs-section {
            flex: 0 1 0;
        }
        
        #tabbrowser-arrowscrollbox .zen-workspace-normal-tabs-section {
            flex: 1 1 0;
            overflow-y: auto !important;
        }
    }

    @media (-moz-bool-pref: "uc.pins.active-bg") {
        .zen-workspace-tabs-section .tabbrowser-tab[pinned][selected="true"] .tab-stack .tab-background {
            background-color: var(--mod-superpins-pins-active-bg) !important;
            opacity: 1 !important;
        }

        .zen-workspace-tabs-section .tabbrowser-tab[pinned][selected="true"]:hover .tab-stack .tab-background {
            opacity: 0.8 !important;
            background-color: var(--mod-superpins-pins-active-bg) !important;
        }
    }

    @media (-moz-bool-pref: "zen.workspaces.indicator-name-center") {
        .zen-current-workspace-indicator-name {
            position: absolute;
            left: 0;
            text-align: center;
            width: 100%;
        }
    }

    :root:has(#theme-SuperPins[zen-workspaces-indicator-position="top"]) {
        .zen-current-workspace-indicator {
            top: 0;
        }

        .zen-essentials-container {
            margin-top: 48px;
        }

        .workspace-arrowscrollbox {
            margin-top: 50px;
        }

        zen-workspace {
            padding-top: 0 !important;
        }
    }

    :root:has(#theme-SuperPins[zen-workspaces-indicator-position="bottom"]) {
        .zen-current-workspace-indicator {
            position: fixed !important;
            bottom: 0;
            z-index: 200;
        }

        zen-workspace {
            margin-top: 2px;
        }
    }

    @media (-moz-bool-pref: "uc.remove-sidebar-scrollbar") {
        scrollbox:nth-child(5), #tabbrowser-arrowscrollbox .zen-workspace-normal-tabs-section {
            scrollbar-width: none !important;
        }
    }
}

/* End of Zen Mods */
